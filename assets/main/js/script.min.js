let slides=[{tag:"Website",marquee:"Eclipse Interactive Art Portfolio",image:"./assets/images/1.jpg"},{tag:"Website",marquee:"Creative Digital Experience",image:"./assets/images/2.jpg"},{tag:"Website",marquee:"Modern Web Solutions",image:"./assets/images/3.jpg"},{tag:"Website",marquee:"Interactive Design Studio",image:"./assets/images/4.jpg"},{tag:"Website",marquee:"Innovative Web Platform",image:"./assets/images/5.jpg"}];gsap.registerPlugin(ScrollTrigger),document.addEventListener("DOMContentLoaded",()=>{let u=0,c=0,d=!1,m=!1,t=new Lenis;t.on("scroll",ScrollTrigger.update),gsap.ticker.add(e=>{t.raf(1e3*e)}),gsap.ticker.lagSmoothing(0);var e=document.querySelector(".carousel .slide");function y(e){var t=e.textContent;e.textContent=t+" "+t+" "+t,gsap.to(e,{x:"-33.33%",duration:10,ease:"linear",repeat:-1,rotation:.01})}gsap.set(e,{clipPath:"polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)"}),gsap.set(e.querySelector(".slide-img img"),{y:"0%"}),y(e.querySelector(".marquee-container h1"));ScrollTrigger.create({trigger:".carousel",start:"top top",end:`+=${15*window.innerHeight}px`,pin:!0,pinSpacing:!0,scrub:1,onUpdate:e=>{if(!m){var a,e=e.progress;if(a=e,document.querySelectorAll(".progress-bar").forEach((e,t)=>{t=Math.min(Math.max(5*a-t,0),1);e.style.setProperty("--progress",t)}),!d){var t=e>c,o=Math.min(Math.floor(5*e),4);if(o!==u){d=!0;try{var r,s,i,l,n=o,p=t,g=document.querySelector(".carousel");if(g){let e=g.querySelector(".carousel .slide");e&&(n=slides[n],(r=document.createElement("div")).className="slide",r.innerHTML=`
      <div class="slide-img">
        <img src="${n.image}" alt="" />
      </div>
      <div class="slide-copy">
        <div class="slide-tag">
          <p>${n.tag}</p>
        </div>
        <div class="slide-marquee">
          <div class="marquee-container">
            <h1>${n.marquee}</h1>
          </div>
        </div>
      </div>`,y(r.querySelector(".marquee-container h1")),n=e.querySelector(".slide-img img"),s=e.querySelector(".slide-copy"),n)&&s?(gsap.killTweensOf(e),gsap.killTweensOf(n),gsap.killTweensOf(s),i=r.querySelector(".slide-img img"),l=r.querySelector(".slide-copy"),p?(gsap.set(r,{clipPath:"polygon(0% 100%, 100% 100%, 100% 100%, 0% 100%)"}),gsap.set(i,{y:"25%"}),gsap.set(l,{y:"100%"}),g.appendChild(r),gsap.to(r,{clipPath:"polygon(0% 100%, 100% 100%, 100% 0%, 0% 0%)",duration:1,ease:"power4.out"}),gsap.to(i,{y:"0%",duration:1,ease:"power4.out"}),gsap.to(l,{y:"0%",duration:1,ease:"power4.out"}),gsap.to(e,{clipPath:"polygon(0% 0%, 100% 0%, 100% 0%, 0% 0%)",duration:1,ease:"power4.out",onComplete:()=>{e.parentNode&&e.remove(),d=!1},onInterrupt:()=>{d=!1}}),gsap.to(n,{y:"-25%",duration:1,ease:"power4.out"}),gsap.to(s,{y:"-100%",duration:1,ease:"power4.out"})):(gsap.set(r,{clipPath:"polygon(0% 0%, 100% 0%, 100% 0%, 0% 0%)"}),gsap.set(i,{y:"-25%"}),gsap.set(l,{y:"-100%"}),g.insertBefore(r,e),gsap.to(r,{clipPath:"polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)",duration:1,ease:"power4.out"}),gsap.to(i,{y:"0%",duration:1,ease:"power4.out"}),gsap.to(l,{y:"0%",duration:1,ease:"power4.out"}),gsap.to(e,{clipPath:"polygon(0% 100%, 100% 100%, 100% 100%, 0% 100%)",duration:1,ease:"power4.out",onComplete:()=>{e.parentNode&&e.remove(),d=!1},onInterrupt:()=>{d=!1}}),gsap.to(n,{y:"25%",duration:1,ease:"power4.out"}),gsap.to(s,{y:"100%",duration:1,ease:"power4.out"}))):d=!1}u=o}catch(e){console.error("Animation error:",e),d=!1}}c=e}}},onKill:()=>{m=!0}})});