gsap.registerPlugin(ScrollTrigger),document.addEventListener("DOMContentLoaded",()=>{let m=(()=>{var e=document.querySelectorAll(".carousel .slide, .carousel .slide-data");let r=[];return e.forEach(e=>{var t=e.querySelector(".slide-img img"),o=e.querySelector(".slide-tag p"),e=e.querySelector(".marquee-container h1");t&&o&&e&&r.push({tag:o.textContent.trim(),marquee:e.textContent.trim(),image:t.src})}),r})();if(console.log("Slides data:",m),document.querySelectorAll(".carousel .slide-data").forEach(e=>{e.style.display="none"}),0===m.length)console.error("No slides found in HTML");else{let c=0,u=0,d=!1,y=!1,t=new Lenis;t.on("scroll",ScrollTrigger.update),gsap.ticker.add(e=>{t.raf(1e3*e)}),gsap.ticker.lagSmoothing(0);var e=document.querySelector(".carousel .slide");gsap.set(e,{clipPath:"polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)"}),gsap.set(e.querySelector(".slide-img img"),{y:"0%"}),h(e.querySelector(".marquee-container h1")),ScrollTrigger.create({trigger:".carousel",start:"top top",end:`+=${window.innerHeight*(3*m.length)}px`,pin:!0,pinSpacing:!0,scrub:1,onUpdate:e=>{if(!y){var o,e=e.progress;if(o=e,document.querySelectorAll(".progress-bar").forEach((e,t)=>{t=Math.min(Math.max(o*m.length-t,0),1);e.style.setProperty("--progress",t)}),!d){var t=e>u,r=Math.min(Math.floor(e*m.length),m.length-1);if(r!==c){d=!0;try{var a,s,l,i,n=r,p=t,g=document.querySelector(".carousel");if(g){let e=g.querySelector(".carousel .slide");e&&(n=m[n],(a=document.createElement("div")).className="slide",a.innerHTML=`
      <div class="slide-img">
        <img src="${n.image}" alt="" />
      </div>
      <div class="slide-copy">
        <div class="slide-tag">
          <p>${n.tag}</p>
        </div>
        <div class="slide-marquee">
          <div class="marquee-container">
            <h1>${n.marquee}</h1>
          </div>
        </div>
      </div>`,h(a.querySelector(".marquee-container h1")),n=e.querySelector(".slide-img img"),s=e.querySelector(".slide-copy"),n)&&s?(gsap.killTweensOf(e),gsap.killTweensOf(n),gsap.killTweensOf(s),l=a.querySelector(".slide-img img"),i=a.querySelector(".slide-copy"),p?(gsap.set(a,{clipPath:"polygon(0% 100%, 100% 100%, 100% 100%, 0% 100%)"}),gsap.set(l,{y:"25%"}),gsap.set(i,{y:"100%"}),g.appendChild(a),gsap.to(a,{clipPath:"polygon(0% 100%, 100% 100%, 100% 0%, 0% 0%)",duration:1,ease:"power4.out"}),gsap.to(l,{y:"0%",duration:1,ease:"power4.out"}),gsap.to(i,{y:"0%",duration:1,ease:"power4.out"}),gsap.to(e,{clipPath:"polygon(0% 0%, 100% 0%, 100% 0%, 0% 0%)",duration:1,ease:"power4.out",onComplete:()=>{e.parentNode&&e.remove(),d=!1},onInterrupt:()=>{d=!1}}),gsap.to(n,{y:"-25%",duration:1,ease:"power4.out"}),gsap.to(s,{y:"-100%",duration:1,ease:"power4.out"})):(gsap.set(a,{clipPath:"polygon(0% 0%, 100% 0%, 100% 0%, 0% 0%)"}),gsap.set(l,{y:"-25%"}),gsap.set(i,{y:"-100%"}),g.insertBefore(a,e),gsap.to(a,{clipPath:"polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)",duration:1,ease:"power4.out"}),gsap.to(l,{y:"0%",duration:1,ease:"power4.out"}),gsap.to(i,{y:"0%",duration:1,ease:"power4.out"}),gsap.to(e,{clipPath:"polygon(0% 100%, 100% 100%, 100% 100%, 0% 100%)",duration:1,ease:"power4.out",onComplete:()=>{e.parentNode&&e.remove(),d=!1},onInterrupt:()=>{d=!1}}),gsap.to(n,{y:"25%",duration:1,ease:"power4.out"}),gsap.to(s,{y:"100%",duration:1,ease:"power4.out"}))):d=!1}c=r}catch(e){console.error("Animation error:",e),d=!1}}u=e}}},onKill:()=>{y=!0}});function h(e){var t=e.textContent;e.textContent=t+" "+t+" "+t,gsap.to(e,{x:"-33.33%",duration:10,ease:"linear",repeat:-1,rotation:.01})}}});